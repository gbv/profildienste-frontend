<!DOCTYPE html>
<html lang="en" ng-app="Profildienst">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test</title>

    <link href="/dist/css/main.min.css" rel="stylesheet" />
    <link href="/dist/css/vendor.min.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container" ng-controller="MainController">
      <div infinite-scroll="entries.nextPage()" infinite-scroll-disabled="entries.loading" infinite-scroll-distance="1">
        <div class="row title-box" ng-class="{selected: item.status.selected}" id="row" ng-repeat="item in entries.items" ng-controller="ItemController as ItemCtrl"> <!-- begin of title box -->
          <div class="col-lg-2 col-md-2 col-sm-2 cover-box">

            <!-- Selection button -->
            <button type="button" class="btn btn-link pull-left xt-control xt-list" ng-click="ItemCtrl.toggleSelect()" ng-show="item.status.rejectable">
              <i class="fa fa-square-o fa-2x" ng-hide="item.status.selected"></i>
              <i class="fa fa-check-square-o fa-2x" ng-show="item.status.selected"></i>
            </button>

            <img ng-show="item.hasCover" ng-src="{{item.cover_md}}" class="cover cover-lg" rel="{{item.cover_lg}}">
            <img ng-hide="item.hasCover" ng-src="{{item.cover_md}}" class="cover">
          </div>
          <div class="col-lg-7 col-md-7 col-sm-7 title-info"> <!-- begin of title info -->

            <!-- begin of general information -->
            <h2>{{item.titel}}</h2>
            <br>
            <h3>{{item.untertitel}}</h3>
            <br>
            <br>
            <span class="text-muted">von</span> {{item.verfasser}}
            <span class="text-muted">(</span> {{item.verlag}} <span class="text-muted">)</span>
            <br>
            <span class="text-muted">Umfang: </span> {{item.umfang}}
            <span ng-show="item.format | notEmpty">
              <span class="text-muted">(</span>{{item.format}}<span class="text-muted">)</span>
            </span>
            <br>
            <br>
            <span class="text-muted">ISBN: </span> {{item.isbn}} <br>
            <br>
            <span class="text-muted">erscheint: </span> {{item.ersch_termin}} <br>
            <br>
            <!-- end of general information -->

            <!-- begin of gvk line -->
            <span class="text-muted">GVK-Treffer: </span>{{item.mak}}
            <span ng-show="item.ilns | notEmpty">
              <span class="text-muted">(ILNs: </span>{{item.ilns}}
              <span ng-show="item.ppn">
                <span class="text-muted">, PPN: </span> {{item.ppn}}
              </span>
              <span class="text-muted">)</span>
            </span>
            <!-- end of gvk line -->

            <br>
            <br>

            <div ng-show="item.status.inputs"> <!-- begin of inputs -->

              <!-- Lieferant -->
              <span class="text-muted">Lieferant: </span>
                <input type="text" pattern=".{7,}" title="Maximal 7 Zeichen" class="form-control input-sm lft" size="7" maxlength="7" placeholder="{{user.def_lft}}" ng-model="item.lft" ng-show="ItemCtrl.showInpField()">
              <span ng-hide="ItemCtrl.showInpField()">{{item.lft}}</span>

              <!-- Budget -->
              <span class="text-muted">Budget:</span>
              <select ng-show="ItemCtrl.showInpField()" class="form-control lft input-sm" id="bdg-{$id}">
                <option ng-repeat="budget in user.budgets" ng-selected="{{budget.key == user.def_bdg}}" value="budget.key">{{budget.value}}</option>
              </select>
              <span ng-hide="ItemCtrl.showInpField()">{{item.bdg}}</span>

              <!-- Selektionscode -->
              <span class="text-muted">Selektionscode: </span>
              <input type="text" pattern=".{20,}" title="Maximal 20 Zeichen" class="form-control input-sm lft" size="20" maxlength="20" ng-model="item.selcode" ng-show="ItemCtrl.showInpField()" placeholder="Selektionscode">
              <span ng-hide="ItemCtrl.showInpField()">{{item.selcode}}</span>

              <!-- SSG Nummer -->
              <span class="text-muted">SSGs-Nr.: </span>
              <input type="text" pattern=".{3,}" title="Maximal 3 Zeichen" class="form-control input-sm lft" size="3" maxlength="3" ng-model="item.ssgnr" ng-show="ItemCtrl.showInpField()" placeholder="SSG">
              <span ng-hide="ItemCtrl.showInpField()">{{item.ssgnr}}</span>

            </div> <!-- end of inputs -->

            <!-- Additional Information -->
            <div collapse="addInfCollapsed">
              <br>
              <span class="text-muted">Erscheinungsjahr: </span> {{item.ersch_jahr}} <br><br>
              <span class="text-muted">Gattung: </span> {{item.gattung}} <br><br>
              <span class="text-muted">DNB-Nummer: </span> {{item.dnbnum}} <br>
              <span class="text-muted">WV: </span> {{item.wvdnb}} <br><br>
              <span class="text-muted">DNB Sachgruppe: </span> {{item.sachgruppe}} <br><br>
              <span class="text-muted">Zugeordnete Fachreferenten: </span>
              <span ng-repeat="person in item.zugeordnet">
                {{person}}{{$last ? '' : ', '}}
              </span>
              <br>
              <br>
            </div>

            <!-- Comments -->
            <div collapse="CommentCollapsed" ng-show="item.status.comments" ng-hide="item.comment | notEmpty">
              <br>
              <span class="text-muted">Kommentar: </span><br>
              <textarea class="form-control cmt-field" rows="3" ng-model="item.comment" placeholder="Freitext-Kommentar"></textarea>
            </div>

            <br>
            <br>

            <div ng-show="item.comment | notEmpty">
              <span class="text-muted">Kommentar: </span> {{item.comment}}
            </div>

            <br>
            <br>

            <!-- Buttons -->
            <button type="button" ng-click="addInfCollapsed = !addInfCollapsed" class="btn btn-primary btn-sm add-bib-inf">
              <i class="fa fa-plus-square-o" ng-show="addInfCollapsed"></i>
              <i class="fa fa-minus-square-o" ng-hide="addInfCollapsed"></i>
              Zusätzliche Informationen
            </button>

            <button type="button"  ng-click="CommentCollapsed = false" ng-show="item.status.comments" class="btn btn-primary btn-sm cmt-btn">
              <i class="fa fa-comment"></i> Kommentieren
            </button>

            <button type="button" class="btn btn-primary btn-sm btn-opac">
              <i class="fa fa-external-link"></i> OPAC Suche
            </button>

            <button type="button" class="btn btn-primary btn-sm add-inf" ng-show="item.addInfURL | notEmpty">
              <i class="fa fa-plus-square-o"></i> Verlagsmeldung
            </button>

            <br>
            <br>

            <div class="well well-lg inf" ng-model="item.addinf"></div>
          </div> <!-- end of title info -->

          <div class="col-lg-3 col-md-3 col-sm-2">
            <span class="price" ng-show="item.price | notEmpty">{{item.price}}</span>
          </div>

          <div class="col-lg-3 price-com col-md-3 col-sm-2">
            <span class="text-muted" ng-show="item.price_com | notEmpty">{{item.price_com}}</span>
            <br>
            <br>
          </div>

          <div class="col-lg-3 cart-btn">
            <span ng-show="ItemCtrl.showNoTopBtn()">
              <br><br><br>
            </span>
            <div class="btn-group pull-right" ng-show="ItemCtrl.showCartBtnRem()">
	            <button type="button" class="btn btn-success add-cart" disabled="disabled">
                <i class="fa fa-check"></i> Im Warenkorb
              </button>
	            <button type="button" class="btn btn-default rm-cart">
                <i class="fa fa-times"></i>
              </button>
            </div>

            <div class="btn-group pull-right" ng-show="ItemCtrl.showCartBtn()">
              <button type="button" class="btn btn-success add-cart" ng-click="ItemCtrl.addToCart()">
                <i class="fa fa-shopping-cart"></i> Warenkorb
              </button>
            </div>
          </div>

          <div class="col-lg-3 wl-btn">
            <span class="text-muted" ng-show="item.status.done">Sie haben diesen Titel bereits bestellt.</span>
            <div class="btn-group pull-right" ng-show="item.status.rejected">
              <button type="button" class="btn btn-danger rj-remove">
                <i class="fa fa-plus-circle"></i> Wieder aufnehmen
              </button>
            </div>

            <div class="btn-group pull-right" ng-hide="item.status.watchlist | notEmpty">
              <button type="button" class="btn btn-warning add-watchlist" ng-click="ItemCtrl.addToWL(user.def_wl)">
                <i class="fa fa-star fa-lg"></i> Merkliste</button>
              <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu pull-right">
                <li ng-repeat="wl in user.watchlists" ng-click="ItemCtrl.addToWL(wl.id)">
                  <a href="#{{wl.id}}">{{wl.name}}</a>
                </li>
              </ul>
            </div>

            <div class="btn-group pull-right" ng-show="item.status.watchlist | notEmpty">
              <button type="button" class="btn btn-warning add-watchlist disabled">
                <i class="fa fa-check"></i> In „ {{item.status.watchlist.name}} “
              </button>
              <button type="button" class="btn btn-default rm-watchlist" rel='$rel' id="wl-btn-rm-$id">
                <i class="fa fa-times"></i>
              </button>
            </div>

          </div>

          <div class="col-lg-3" ng-show="item.status.rejectable">
            <button type="button" class="btn btn-link pull-right xt-control xt-remove">
              <i class="fa fa-minus-circle fa-lg"></i> Ablehnen
            </button>
          </div>
        </div> <!-- end of title box -->
        <div ng-show="entries.loading">Loading data...</div>
      </div>
    </div>

    <script type="text/javascript" src="/dist/js/vendor.min.js"></script>
    <script type="text/javascript" src="/dist/js/main.min.js"></script>
  </body>
</html>